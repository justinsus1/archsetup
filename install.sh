#!/bin/bash
#  _   _                    ____  _             _             
# | | | |_   _ _ __  _ __  / ___|| |_ __ _ _ __| |_ ___ _ __  
# | |_| | | | | '_ \| '__| \___ \| __/ _` | '__| __/ _ \ '__| 
# |  _  | |_| | |_) | |     ___) | || (_| | |  | ||  __/ |    
# |_| |_|\__, | .__/|_|    |____/ \__\__,_|_|   \__\___|_|    
#        |___/|_|                                             
#  

# ----------------------------------------------------- 
# Version
# ----------------------------------------------------- 
version=$(cat install/version)

# ----------------------------------------------------- 
# Sync time
# ----------------------------------------------------- 

systemctl enable systemd-timesyncd.service --now
timedatectl set-ntp true
timedatectl set-timezone Australia/Sydney


# -----------------------------------------------------
# Pacman Conf
# -----------------------------------------------------

# source install/pacman/config.sh

source before.sh

# ----------------------------------------------------- 
# Library
# ----------------------------------------------------- 
source install/includes/library.sh

# ----------------------------------------------------- 
# Header
# ----------------------------------------------------- 
source install/includes/header.sh

# ----------------------------------------------------- 
# Check supported Linux distribution
# ----------------------------------------------------- 
source install/includes/checkdistro.sh

# ----------------------------------------------------- 
# Load Library for used distro
# ----------------------------------------------------- 
source install/$installer/library.sh

# ----------------------------------------------------- 
# Install required packages
# ----------------------------------------------------- 
source install/$installer/install_required.sh

# ----------------------------------------------------- 
# Os-Prober
# ----------------------------------------------------- 

source install/includes/os-prober.sh

# ----------------------------------------------------- 
# Confirm Start
# ----------------------------------------------------- 
source install/includes/confirm.sh

# ----------------------------------------------------- 
# Preparation
# ----------------------------------------------------- 
source install/includes/preparation.sh

# ----------------------------------------------------- 
# Install Hyprland Packages
# ----------------------------------------------------- 
source install/$installer/install_packages.sh

# ----------------------------------------------------- 
# Create Backup
# ----------------------------------------------------- 
source install/includes/backup.sh

# ----------------------------------------------------- 
# Restore settings
# ----------------------------------------------------- 
source install/includes/restore.sh

# ----------------------------------------------------- 
# Keyboard
# ----------------------------------------------------- 
source install/includes/keyboard.sh

# ----------------------------------------------------- 
# Screen Resolution
# ----------------------------------------------------- 
source install/includes/monitor.sh

# ----------------------------------------------------- 
# KVM
# ----------------------------------------------------- 
source install/includes/kvm.sh

# ----------------------------------------------------- 
# Copy the configuration
# ----------------------------------------------------- 
source install/includes/copy.sh

# ----------------------------------------------------- 
# Gaming
# ----------------------------------------------------- 

source install/arch/gaming.sh

# ----------------------------------------------------- 
# Reboot
# ----------------------------------------------------- 

echo "please run nvim ~/.config/nvim/init.lua"

#test fuck
